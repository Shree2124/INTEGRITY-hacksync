{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/HAcksync%20v2/src/lib/dbConnect.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  console.error('Supabase URL or Anon Key is missing. Check your .env.local file.');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///E:/HAcksync%20v2/src/lib/leaflet.ts"],"sourcesContent":["import L from 'leaflet';\r\n\r\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\r\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\r\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\r\n});\r\n"],"names":[],"mappings":";AAAA;;AAEA,OAAO,AAAC,4JAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAS,WAAW;AAEpD,4JAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;IAC1B,SAAS;IACT,eAAe;IACf,WAAW;AACb"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///E:/HAcksync%20v2/src/app/%28site%29/mapview/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport dynamic from 'next/dynamic';\r\nimport { OfficialRecord, Report } from '@/types/types';\r\nimport { supabase } from '@/lib/dbConnect';\r\nimport '@/lib/leaflet';\r\n\r\nconst MapVisualizer = dynamic(() => import('@/components/MapView/Mapvisualizer'), {\r\n  ssr: false\r\n});\r\n\r\nexport default function MapPage() {\r\n  const [records, setRecords] = useState<OfficialRecord[]>([]);\r\n  const [reports, setReports] = useState<Report[]>([]);\r\n  const [selectedRecord, setSelectedRecord] = useState<OfficialRecord | null>(null);\r\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n  // Get User Location\r\n  useEffect(() => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setUserLocation({\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          });\r\n        },\r\n        () => {\r\n          // Fallback if denied (Mumbai)\r\n          setUserLocation({ lat: 19.0760, lng: 72.8777 });\r\n        }\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      try {\r\n        const response = await fetch('/api/map');\r\n        const data = await response.json();\r\n\r\n        // Extract projects and reports from the joined data\r\n        const allReports = data ?? [];\r\n        const allProjects = allReports.map((r: any) => r.audit_results?.[0]?.government_projects).filter(Boolean);\r\n\r\n        // Also fetch all projects to show ones without reports\r\n        const { data: projectsData } = await supabase.from('government_projects').select('*');\r\n\r\n        setRecords(projectsData as unknown as OfficialRecord[] ?? []);\r\n        setReports(allReports);\r\n      } catch (error) {\r\n        console.error(\"Failed to load map data:\", error);\r\n      }\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"h-screen w-full\">\r\n      <MapVisualizer\r\n        records={records}\r\n        reports={reports}\r\n        onRecordSelect={setSelectedRecord}\r\n        userLocation={userLocation}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAO;;;;;;IAC3B,KAAK;;AAGQ,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAmB,EAAE;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAwB;IAC5E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAsC;IACtF,oBAAoB;IACpB,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,WAAW,EAAE;YACzB,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;gBACC,gBAAgB;oBACd,KAAK,SAAS,MAAM,CAAC,QAAQ;oBAC7B,KAAK,SAAS,MAAM,CAAC,SAAS;gBAChC;YACF,GACA;gBACE,8BAA8B;gBAC9B,gBAAgB;oBAAE,KAAK;oBAAS,KAAK;gBAAQ;YAC/C;QAEJ;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,oDAAoD;gBACpD,MAAM,aAAa,QAAQ,EAAE;gBAC7B,MAAM,cAAc,WAAW,GAAG,CAAC,CAAC,IAAW,EAAE,aAAa,EAAE,CAAC,EAAE,EAAE,qBAAqB,MAAM,CAAC;gBAEjG,uDAAuD;gBACvD,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,mIAAQ,CAAC,IAAI,CAAC,uBAAuB,MAAM,CAAC;gBAEjF,WAAW,gBAA+C,EAAE;gBAC5D,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;QACA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,SAAS;YACT,SAAS;YACT,gBAAgB;YAChB,cAAc;;;;;;;;;;;AAItB"}}]
}